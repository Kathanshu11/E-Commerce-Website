<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="layout(content)">
<head>
	<!-- BootStrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<!-- Font awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Ballet:opsz@16..72&family=Cookie&family=Farsan&family=Fleur+De+Leah&family=Jacques+Francois+Shadow&family=Mea+Culpa&family=Meddon&family=Quintessential&family=Rochester&family=UnifrakturMaguntia&display=swap"
		rel="stylesheet">
	<title>navbar</title>
	<style>
		* {
			box-sizing: 0;
			margin: 0;
			font-family: "Quintessential", serif;
		}

		::-webkit-scrollbar {
			display: none;
		}
		.product-container {
		  transition: opacity 0.4s ease-in-out;
		  opacity: 1;
		}
		.product-container.fade-out {
		  opacity: 0;
		}

		.category-scroll {
			overflow-x: auto;
			overflow-y: hidden;
			white-space: nowrap;
			padding: 10px 0;
			-ms-overflow-style: none;
			scrollbar-width: none;
		}

		.category-scroll::-webkit-scrollbar {
			display: none;
		}

		.category-scroll img {
			transition: transform 0.3s ease;
		}

		.category-scroll img:hover {
			transform: scale(1.05);
		}
	</style>
</head>
<body>
	<!--------------------------------------------------------------------->
	<nav class="navbar navbar-expand-lg navbar-light bg-primary">
		<div class="container-fluid">
			<a class="navbar-brand text-light" th:href="@{/}">ShopSphere</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse"
				data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<form action="/search" method="get" class="d-flex mx-auto w-50  bg-light">
				<input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="ch">
				<button class="btn btn-outline-primary btn-sm" type="submit">Search</button>
			</form>
		</div>
		<div class="collapse navbar-collapse d-flex justify-content-between" id="navbarSupportedContent">
			<ul class="navbar-nav me-auto mb-2 mb-lg-0">
				<li class="nav-item">
					<a class="nav-link text-light" th:href="@{/}">Home</a>
				</li>
				<li class="nav-item">
					<a class="nav-link text-light" th:href="@{/productPage}">Product</a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle text-light" id="navbarDropdown" role="button"
						data-bs-toggle="dropdown" aria-expanded="false">
						Categories
					</a>

					<ul class="dropdown-menu" aria-labelledby="navbarDropdown">
						<li th:each="cat : ${categories}">
							<a class="dropdown-item" th:href="@{/admin/categories/{name}(name=${cat.categoryName})}"
								th:text="${cat.categoryName}">
							</a>
						</li>
					</ul>
				</li>
				<th:block th:if="${user != null and !#strings.equalsIgnoreCase(user.role, 'ROLE_ADMIN')}">
					<li class="nav-item">
						<a class="nav-link text-light" th:href="@{/user/viewOrders}">Orders</a>
					</li>
				</th:block>
				<th:block th:if="${user == null}">

					<li class="nav-item">
						<a class="dropdown-item" th:href="@{/signin}">Log in</a>
					</li>
					<li class="nav-item">
						<a class="dropdown-item" th:href="@{/regiPage}">Register</a>
					</li>
				</th:block>
				<th:block th:if="${user != null}">
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle text-light" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
							aria-expanded="false">
							<img th:src="@{/userRegisterImg/{img}(img=${user.profileImage})}" alt="Profile Image"
								class="rounded-circle" height="30" width="30" />

							<span class="text-light" th:text="${user.name}"></span>
						</a>
						<th:block th:if="${user != null and !#strings.equalsIgnoreCase(user.role, 'ROLE_ADMIN')}">
							<ul class="dropdown-menu" aria-labelledby="navbarDropdown">
								<li><a class="dropdown-item" th:href="@{/user/profilePage}">Profile</a></li>
							</ul>
						</th:block>
					</li>
					<th:block th:if="${user != null and #strings.equalsIgnoreCase(user.role, 'ROLE_ADMIN')}">
						<li class="nav-item">
							<a th:href="@{/Admin/adminPage}" class="nav-link text-light">Admin</a>
						</li>
					</th:block>
					<li class="nav-item">
						<a class="nav-link text-light" th:href="@{/logout}">Logout</a>
					</li>
				</th:block>
				</li>
				<th:block th:if="${user != null and !#strings.equalsIgnoreCase(user.role, 'ROLE_ADMIN')}">
					<li>
						<a class="dropdown-item" th:href="@{/user/cartPage}">
							<i class="fa-solid fa-cart-shopping text-warning fs-4"></i><span class="text-light">[</span><span class="text-light fs-3"
								th:text="${count != null ? count : 0}">0</span><span class="text-light">]</span></a>
					</li>
				</th:block>
			</ul>
		</div>
	</nav>
	<div th:insert="${content}"></div>
	<footer>
		<p class="text-center bg-dark text-white mb-0">@Copyright2025</p>
	</footer>
	<!-- BootStrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous"></script>
</body>

</html>